<!-- Column Headers -->
<div class="list-header" data-testid="users-list-header">
  <span class="col-avatar"></span>
  <span class="col-user">User</span>
  <span class="col-role">Role</span>
  <span class="col-status">Status</span>
  <span class="col-login">Last Login</span>
</div>

<!-- User Rows -->
<div class="user-list" data-testid="users-list-rows">
  @for (user of users(); track user.id; let i = $index) {
    @let roleConfig = getRoleConfig(user.role);
    @let statusConfig = getStatusConfig(user.status);

    <div
      class="user-row"
      [class.selected]="selectedUserId() === user.id"
      [style.animation-delay.ms]="i * 30"
      (click)="selectUser(user.id)"
      [attr.data-testid]="'user-row-' + user.id"
      [attr.data-user-email]="user.email"
      [attr.data-user-role]="user.role"
    >
      <div class="col-avatar">
        <ui-avatar
          [firstName]="user.firstName"
          [lastName]="user.lastName"
          [color]="user.avatarColor"
          [size]="34"
          data-testid="user-avatar"
        />
      </div>

      <div class="col-user">
        <div class="user-name" data-testid="user-name">{{ user.firstName }} {{ user.lastName }}</div>
        <div class="user-email" data-testid="user-email">{{ user.email }}</div>
      </div>

      <div class="col-role">
        <span
          class="role-badge"
          [style.color]="'var(' + roleConfig.colorVar + ')'"
          [style.background]="'var(' + roleConfig.bgVar + ')'"
          data-testid="user-role-badge"
        >
          {{ roleConfig.icon }} {{ roleConfig.label }}
        </span>
      </div>

      <div class="col-status">
        <span class="status-text" [style.color]="'var(' + statusConfig.colorVar + ')'" data-testid="user-status">
          {{ statusConfig.label }}
        </span>
      </div>

      <div class="col-login">
        <span class="login-time" data-testid="user-last-login">{{ user.lastLogin }}</span>
      </div>
    </div>
  }

  @if (users().length === 0) {
    <div class="empty-state" data-testid="empty-users-list">
      No users found
    </div>
  }
</div>
