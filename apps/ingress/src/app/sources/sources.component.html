<div class="flex m-20">
  <div class="w-1/2 mr-10">
    <proto-source-list
      [sources]="(sources$ | async)!"
      [statusCounts]="(sourcesByStatus$ | async)!"
      (selected)="selectSource($event)"
      (deleted)="deleteSource($event)"
      (testConnection)="testConnection($event)"
      (syncSource)="syncSource($event)">
    </proto-source-list>
  </div>
  <div class="w-1/2 ml-10">
    <proto-source-detail
      [source]="selectedSource$ | async"
      (saved)="saveSource($event)"
      (cancelled)="reset()">
    </proto-source-detail>

    @if (selectedSource$ | async; as source) {
      <div class="mt-4">
        <proto-source-status
          [source]="source"
          (testConnection)="testConnection($event)"
          (syncSource)="syncSource($event)">
        </proto-source-status>
      </div>
      @if (currentSchema$ | async; as schema) {
        <div class="mt-4">
          <proto-schema-viewer [schema]="schema"></proto-schema-viewer>
        </div>
      }
    }
  </div>
</div>
